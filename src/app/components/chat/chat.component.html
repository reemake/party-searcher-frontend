<div class="chat">

  <div class="chat-div" id="chat-div">
    <h2>{{chat.name}}</h2>
    <hr/>
    <ul appScrollDirective id="messages-list">
      <li (inViewportAction)="setMessageAsRead(message)" (mouseenter)="message.focus=true"
          (mouseleave)="message.focus=false" *ngFor="let message of messages" id="message{{message.id}}"
          inViewport>
        <button (click)="removeMessage(message)" *ngIf="message.focus &&(message.userId===username || isAdmin)"
                class="remove-btn"><img alt="remove" src="assets/img/remove-icon.png"/></button>
        <img alt="user-image" class="user-img"
             src="{{usersImages.get(message.userId)||'assets/img/profile/user.png'}}"/>
        <div class="message">
          <h3>{{message.userId}}</h3>
          <pre>{{message.text}}</pre>
        </div>
      </li>
      <li (inViewportAction)="setMessageAsRead(message)" (mouseenter)="message.focus=true"
          (mouseleave)="message.focus=false" *ngFor="let message of onlineMessages"
          id="message{{message.id}}" inViewport>
        <button (click)="removeMessage(message)" *ngIf="message.focus&&(message.userId===username || isAdmin)"
                class="remove-btn"><img alt="remove" src="assets/img/remove-icon.png"/></button>
        <img alt="user-image" class="user-img"
             src="{{usersImages.get(message.userId)||'assets/img/profile/user.png'}}"/>
        <div class="message">
          <h3>{{message.userId}}</h3>
          <pre>{{message.text}}</pre>
        </div>
      </li>
    </ul>
    <div>
      <form>
        <textarea #text="ngModel" [(ngModel)]="message.text" class="form-control" name="text"
                  style="  width: 100%; max-height: 300px;background-color:#F4F4F4 ; "></textarea>
        <button (click)="sendMessage()" style="border-radius: 3px; background-color:#C4C4C4 ; color: black">отправить
        </button>
      </form>
    </div>
  </div>


</div>
