<body class="page">

<div class="container">

  <h3 id="title">Регистрация аккаунта</h3>
  <form #registerForm="ngForm" (ngSubmit)="registerUser()">
    <small class="text-danger">{{msg}}</small>

    <div class="form-group" id="email-form">
      <label for="email">Email:</label>
      <input #email="ngModel" [(ngModel)]="user.email" class="form-control" id="email" name="email"
             placeholder="Введите адрес электронной почты" required type="email"
             [class.is-invalid]="email.invalid && email.touched" pattern="^\w+@[a-zA-Z_]+?\.[a-zA-Z]{2,3}$"
      >
      <div *ngIf="email.errors && (email.invalid && email.touched)">
        <small class="text-danger" *ngIf="email.errors?.['required']">Email - обязательное поле!</small>
        <small class="text-danger" *ngIf="email.errors?.['pattern']">Email введён некорректно!</small>
      </div>
    </div>

    <div class="form-group" id="login-form">
      <label for="login">Логин:</label>
      <input #login="ngModel" [(ngModel)]="user.login" class="form-control" id="login" name="login"
             placeholder="Введите логин" required type="text"
             [class.is-invalid]="login.invalid && login.touched"
             pattern="^(?=.*[A-Za-z0-9]$)[A-Za-z][A-Za-z\d.-]{0,19}$"
      >
      <div *ngIf="login.errors && (login.invalid && login.touched)">
        <small class="text-danger" *ngIf="login.errors?.['required']">Логин - обязательное поле!</small>
        <small class="text-danger" *ngIf="login.errors?.['pattern']">Логин введён некорректно!</small>
      </div>
    </div>

    <div class="form-group" id="firstname-form">
      <label for="firstName">Имя:</label>
      <input #firstName="ngModel" [(ngModel)]="user.firstName"
             [class.is-invalid]="firstName.invalid && firstName.touched" class="form-control" id="firstName"
             name="firstName" placeholder="Введите имя" required
             type="text"/>
      <small class="text-danger" [class.d-none]="firstName.valid || firstName.untouched">Имя - обязательное
        поле!</small>
    </div>

    <div class="form-group" id="lastname-form">
      <label for="lastName">Фамилия:</label>
      <input #lastName="ngModel" [(ngModel)]="user.lastName" class="form-control" id="lastName" name="lastName"
             placeholder="Введите фамилию" type="text">
    </div>

    <div class="form-group" id="phone-form">
      <label for="phone">Номер телефона:</label>
      <input #phone="ngModel" [(ngModel)]="user.phone" class="form-control" id="phone" name="phone"
             placeholder="Введите Ваш номер телефона" required type="tel"
             [class.is-invalid]="phone.invalid && phone.touched"
             pattern="^(\s*)?(\+)?([- _():=+]?\d[- _():=+]?){10,14}(\s*)?$"
      >
      <div *ngIf="phone.errors && (phone.invalid && phone.touched)">
        <small class="text-danger" *ngIf="phone.errors?.['required']">Номер телефона - обязательное поле!</small>
        <small class="text-danger" *ngIf="phone.errors?.['pattern']">Номер телефона введён некорректно!</small>
      </div>
    </div>

    <div class="form-group" id="password-form">
      <label for="pwd">Пароль:</label>
      <input #password="ngModel" [(ngModel)]="user.password" class="form-control" id="pwd" name="password"
             placeholder="Введите пароль" required type="password"
             [class.is-invalid]="password.invalid && password.touched"
      >
      <small class="text-danger" [class.d-none]="password.valid || password.untouched">Пароль - обязательное поле!</small>
    </div>

    <div class="form-group" id="cpassword-form">
      <label for="cpwd">Подтвердите пароль:</label>
      <input #cpassword="ngModel" [ngModel]="user.password" class="form-control" id="cpwd" name="cpassword" ngModel
             placeholder="Введите пароль ещё раз" required type="password"
             [class.is-invalid]="cpassword.invalid && cpassword.touched"
      />
      <small class="text-danger" [class.d-none]="(cpassword.value == password.value) || cpassword.untouched">Пароли не совпадают!</small>
    </div>

    <button [disabled]="registerForm.form.invalid" type="submit" class="btn btn-outline-danger" id="submit-button">Зарегистрироваться</button>
    <small class="float-right btextual" id="toLogin-button">
      Уже зарегистрированы?
      <a [routerLink]="['/login']" class="btn btn-link">Войти</a>
    </small>
  </form>

</div>
</body>
